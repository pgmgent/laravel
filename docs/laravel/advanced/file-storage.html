<!DOCTYPE html>
<html lang="nl-BE">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>File Storage | Advanced Development &amp; Laravel</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link href="https://www.gdm.gent/vuepress-theme-artevelde/favicon.svg" rel="icon">
    <meta name="description" content="Advanced Development with PHP &amp; MVC with Laravel">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    
    <link rel="preload" href="/laravel/assets/css/0.styles.0244fdd9.css" as="style"><link rel="preload" href="/laravel/assets/js/app.dd1212ec.js" as="script"><link rel="preload" href="/laravel/assets/js/2.7ca25b29.js" as="script"><link rel="preload" href="/laravel/assets/js/37.4a1cf784.js" as="script"><link rel="preload" href="/laravel/assets/js/5.861211ff.js" as="script"><link rel="preload" href="/laravel/assets/js/20.21de2408.js" as="script"><link rel="preload" href="/laravel/assets/js/3.19667c3e.js" as="script"><link rel="prefetch" href="/laravel/assets/js/10.5e9ac10c.js"><link rel="prefetch" href="/laravel/assets/js/11.da89dc38.js"><link rel="prefetch" href="/laravel/assets/js/12.f75538b0.js"><link rel="prefetch" href="/laravel/assets/js/13.f6363d8f.js"><link rel="prefetch" href="/laravel/assets/js/14.4cbd6b93.js"><link rel="prefetch" href="/laravel/assets/js/15.fc4a971d.js"><link rel="prefetch" href="/laravel/assets/js/16.7a52b460.js"><link rel="prefetch" href="/laravel/assets/js/17.3743a231.js"><link rel="prefetch" href="/laravel/assets/js/18.e103b0bd.js"><link rel="prefetch" href="/laravel/assets/js/19.0db8ae57.js"><link rel="prefetch" href="/laravel/assets/js/21.8d175336.js"><link rel="prefetch" href="/laravel/assets/js/22.81430f94.js"><link rel="prefetch" href="/laravel/assets/js/23.19310e90.js"><link rel="prefetch" href="/laravel/assets/js/24.b5a983f1.js"><link rel="prefetch" href="/laravel/assets/js/25.2a38243c.js"><link rel="prefetch" href="/laravel/assets/js/26.2ec1479c.js"><link rel="prefetch" href="/laravel/assets/js/27.fbb17d54.js"><link rel="prefetch" href="/laravel/assets/js/28.4ee6418d.js"><link rel="prefetch" href="/laravel/assets/js/29.762560c4.js"><link rel="prefetch" href="/laravel/assets/js/30.7889e3c2.js"><link rel="prefetch" href="/laravel/assets/js/31.f7b1407d.js"><link rel="prefetch" href="/laravel/assets/js/32.ff937975.js"><link rel="prefetch" href="/laravel/assets/js/33.18929da0.js"><link rel="prefetch" href="/laravel/assets/js/34.cb33797a.js"><link rel="prefetch" href="/laravel/assets/js/35.23e8520e.js"><link rel="prefetch" href="/laravel/assets/js/36.fc91c806.js"><link rel="prefetch" href="/laravel/assets/js/38.73053d28.js"><link rel="prefetch" href="/laravel/assets/js/39.8da54966.js"><link rel="prefetch" href="/laravel/assets/js/4.9b20a6cc.js"><link rel="prefetch" href="/laravel/assets/js/40.82de1a68.js"><link rel="prefetch" href="/laravel/assets/js/41.54922183.js"><link rel="prefetch" href="/laravel/assets/js/42.11d6d2c4.js"><link rel="prefetch" href="/laravel/assets/js/43.3dbf98aa.js"><link rel="prefetch" href="/laravel/assets/js/44.8cb4e2b3.js"><link rel="prefetch" href="/laravel/assets/js/45.c7a8c41d.js"><link rel="prefetch" href="/laravel/assets/js/46.09d62797.js"><link rel="prefetch" href="/laravel/assets/js/47.2500d1f4.js"><link rel="prefetch" href="/laravel/assets/js/48.e907544b.js"><link rel="prefetch" href="/laravel/assets/js/49.16aca531.js"><link rel="prefetch" href="/laravel/assets/js/50.b7ae9c8b.js"><link rel="prefetch" href="/laravel/assets/js/51.474d9568.js"><link rel="prefetch" href="/laravel/assets/js/52.385fc8cd.js"><link rel="prefetch" href="/laravel/assets/js/53.1c0b929b.js"><link rel="prefetch" href="/laravel/assets/js/54.09f621f4.js"><link rel="prefetch" href="/laravel/assets/js/55.b579426a.js"><link rel="prefetch" href="/laravel/assets/js/56.9147f6c6.js"><link rel="prefetch" href="/laravel/assets/js/57.7a663c42.js"><link rel="prefetch" href="/laravel/assets/js/6.77d8c133.js"><link rel="prefetch" href="/laravel/assets/js/7.e7c0de10.js"><link rel="prefetch" href="/laravel/assets/js/8.22bf2da1.js"><link rel="prefetch" href="/laravel/assets/js/9.e67ff90f.js">
    <link rel="stylesheet" href="/laravel/assets/css/0.styles.0244fdd9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="navbar-item"><div class="sidebar-button"><svg fill="currentColor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg" class="sidebar-icon sidebar-closing-icon"><path fill-rule="evenodd" d="M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"></path> <path fill-rule="evenodd" d="M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"></path></svg> <svg fill="currentColor" height="2em" viewBox="0 0 16 16" width="2em" xmlns="http://www.w3.org/2000/svg" class="sidebar-icon sidebar-opening-icon"><path fill-rule="evenodd" d="M2.5 11.5A.5.5 0 0 1 3 11h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 7h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 3 3h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path></svg></div></div> <a href="/laravel/" class="navbar-item home-link router-link-active"><img src="https://www.gdm.gent/vuepress-theme-artevelde/artevelde__icon--white.svg" alt="Advanced Development &amp; Laravel" class="logo"> <span class="site-name">Advanced Development &amp; Laravel</span></a> <div class="search-box navbar-item"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links navbar-item can-hide"><div class="nav-item"><a href="/laravel/concepts/" class="nav-link">Basisconcepten</a></div><div class="nav-item"><a href="/laravel/laravel/" class="nav-link router-link-active">Laravel</a></div><div class="nav-item"><a href="/laravel/mailing/" class="nav-link">Mailing</a></div><div class="nav-item"><a href="/laravel/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Taal</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/laravel/laravel/advanced/file-storage.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Nederlands</a></li><li class="dropdown-item"><!----> <a href="/laravel/en/" class="nav-link">English</a></li></ul></div></div> <!----> <!----></nav></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/laravel/concepts/" class="nav-link">Basisconcepten</a></div><div class="nav-item"><a href="/laravel/laravel/" class="nav-link router-link-active">Laravel</a></div><div class="nav-item"><a href="/laravel/mailing/" class="nav-link">Mailing</a></div><div class="nav-item"><a href="/laravel/deployment/" class="nav-link">Deployment</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Taal</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/laravel/laravel/advanced/file-storage.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">Nederlands</a></li><li class="dropdown-item"><!----> <a href="/laravel/en/" class="nav-link">English</a></li></ul></div></div> <!----> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/laravel/laravel/" class="router-link-active sidebar-heading clickable open"><span>Laravel MVC Framework</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group depth-1 collapsable is-sub-group"><a href="/laravel/laravel/basics/" class="sidebar-heading clickable"><span>Basisconcepten</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-1 collapsable is-sub-group"><a href="/laravel/laravel/databases/" class="sidebar-heading clickable"><span>Werken met een database</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group depth-1 collapsable is-sub-group"><a href="/laravel/laravel/advanced/" class="router-link-active sidebar-heading clickable open"><span>Dieper in op Laravel</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/laravel/laravel/advanced/authentication.html" class="sidebar-link">Authenticatie</a></li><li><a href="/laravel/laravel/advanced/file-storage.html" aria-current="page" class="active sidebar-link">File Storage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/laravel/laravel/advanced/file-storage.html#link-folder" class="sidebar-link">Link folder</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/advanced/file-storage.html#asset-ophalen" class="sidebar-link">Asset ophalen</a></li><li class="sidebar-sub-header"><a href="/laravel/laravel/advanced/file-storage.html#assets-opladen" class="sidebar-link">Assets opladen</a></li></ul></li><li><a href="/laravel/laravel/advanced/localization.html" class="sidebar-link">Localization</a></li></ul></section></li><li><section class="sidebar-group depth-1 collapsable is-sub-group"><a href="/laravel/laravel/how-to/" class="sidebar-heading clickable"><span>How to</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="file-storage"><a href="#file-storage" class="header-anchor">#</a> File Storage</h1> <p>In een applicatie zullen we ook meerder bestanden willen hosten. Dit kunnen afbeeldingen, video’s of andere documenten zijn.</p> <p>In kleinere applicaties en websites zullen deze op dezelfde hosting staan als de website zelf. Maar bij grotere applicaties waarbij veel afbeeldingen of video’s geüpload worden door een gebruiker. Dan kan het interessant zijn om deze te hosten op een aparte hosting waarbij je bijvoorbeeld niet betaald voor diskspace maar wel voor bandbreedte. Een voorbeeld hiervan is Amazon S3.</p> <h2 id="link-folder"><a href="#link-folder" class="header-anchor">#</a> Link folder</h2> <p>Laravel geeft ons de mogelijkheid om eenvoudig te switchen tussen deze technieken aan de hand van de <code>config/storage.php</code>. Hierin staat reeds standaard gedefinieerd dat onze <code>storage/app/public</code> gekoppeld zal worden met de folder <code>public/storage</code>.</p> <p>Hiervoor moet een link gemaakt worden in de public folder naar de storage folder. Een link is een soort virtuele folder die doorverwijst naar de bron folder. Maak de link aan via onderstaande commando.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>php artisan storage:link
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Je zal nu merken dat er een folderlink is toegevoegd aan je public folder.</p> <h2 id="asset-ophalen"><a href="#asset-ophalen" class="header-anchor">#</a> Asset ophalen</h2> <p>Vanaf nu kan je in de <code>storage/app/public</code> bestanden plaatsen. Bijvoorbeeld <code>images/afbeelding.jpg</code>.</p> <p>In je views kan je deze dan oproepen op onderstaande manier.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;img src=&quot;{{ asset('storage/images/afbeelding.jpg') }}&quot;&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="assets-opladen"><a href="#assets-opladen" class="header-anchor">#</a> Assets opladen</h2> <p>Om assets op te laden moet je uiteraard eerst een <code>&lt;input type=&quot;file&quot; name=&quot;image&quot;&gt;</code> toevoegen aan je formulier.</p> <blockquote><p>Het is belangrijk dat je ook het <code>enctype</code> aanpast van je formulier.
<code>&lt;form method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;</code></p></blockquote> <p>Van zodra je een POST doen van dit formulier zal de client het bestand doorsturen naar de PHP server. Deze server zal het bestand in een temp folder opslaan. Via onze code moeten we dus enkel het bestand nog verplaatsen naar de juiste map.</p> <p>In vanilla php gebruikten we hiervoor de functie <code>move_uploaded_file</code>. Laravel heeft een method ter beschikking die dat meteen voor ons doen. Hierbij zal hij ook telkens een unieke id gebruiken als bestandsnaam. Het voordeel hiervan is dat gebruikers of administrators eenzelfde bestandsnaam kunnen opladen zonder dat ze elkaars bestand zouden overschrijven.</p> <p>Na het verplaatsen moeten we de database nog aanpassen en de bestandsnaam opslaan. Persoonlijk ga ik steeds enkel de bestandsnaam opslaan en niet het pad. Dit heeft als voordeel dat je dan eenvoudig kan veranderen van folderstructuur zonder dat je database aangepast moet worden.</p> <p>Hieronder zie je de aangepaste code van de edit method. Waarbij eerst het bestand wordt verplaatst naar de Storage en daarna meegegeven wordt om op te slaan in de database. Let wel dat je dit enkel doet als er ook effectief een file wordt opgeladen. Anders maak je het veld het editeren bij iedere aanpassing leeg.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public function save(Request $request, $id = null) {
    $project = ($id) ? Project::findOrFail($id) : new Project();

    //Controleer of er een file is opgeladen
    if( $request-&gt;file('photo') ) {
        $uploaded_path = $request-&gt;file('photo')-&gt;store('public/projects');
        //haal enkel de filename op van het pad
        $filename = basename($uploaded_path);
    }

    $project-&gt;name = $request-&gt;input('name');
    $project-&gt;description = $request-&gt;input('description');
    $project-&gt;customer_id = $request-&gt;input('customer_id') ?? 0;
    $project-&gt;publish = 1;
    //Enkel opslaan indien er een filename is.
    if( isset($filename) ) {
        $project-&gt;image = $filename;
    }
    $success = $project-&gt;save();

    $project-&gt;users()-&gt;sync($request-&gt;input('users'));

    return redirect('/project/' . $project-&gt;id);   
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>Wil je zelf kiezen welke bestandsnaam de file moet krijgen dan kan dit via de method <code>storeAs</code>.</p> <p><a href="https://laravel.com/docs/9.x/filesystem#file-uploads" target="_blank" rel="noopener noreferrer">Meer mogelijkheden kan je bekijken via de Laravel documentatie<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <div class="page-nav"><div class="inner"><a href="/laravel/laravel/advanced/authentication.html" class="btn btn-left" data-v-3bc6a301><svg fill="currentColor" class="icon bi" data-v-6414aa66><use xlink:href="/laravel/assets/img/bootstrap-icons.56d35f89.svg#arrow-left" data-v-6414aa66></use></svg> Authenticatie <!----></a> <a href="/laravel/laravel/advanced/localization.html" class="btn btn-right" data-v-3bc6a301><!----> Localization <svg fill="currentColor" class="icon bi" data-v-6414aa66 data-v-3bc6a301><use xlink:href="/laravel/assets/img/bootstrap-icons.56d35f89.svg#arrow-right" data-v-6414aa66></use></svg></a></div></div> <footer class="page-edit"><span class="copyright">© 2023 Arteveldehogeschool</span> <!----> <!----></footer> </main></div><div class="global-ui"></div></div>
    <script src="/laravel/assets/js/app.dd1212ec.js" defer></script><script src="/laravel/assets/js/2.7ca25b29.js" defer></script><script src="/laravel/assets/js/37.4a1cf784.js" defer></script><script src="/laravel/assets/js/5.861211ff.js" defer></script><script src="/laravel/assets/js/20.21de2408.js" defer></script><script src="/laravel/assets/js/3.19667c3e.js" defer></script>
  </body>
</html>
